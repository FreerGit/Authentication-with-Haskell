version: '3'
services: 
    frontend:
        build: ./microservices/frontend
        ports: 
            - "8080:8080"
        volumes: 
            - "./microservices/frontend:/app"
    # backend:
    #     build: backend
    #     ports:
    #         - "3000:3000"
    #     volumes:
    #         - "./backend:/server"
    database:
        image: "postgres" # use latest official postgres version
        env_file:
        - database.env # configure postgres
        volumes:
        - database-data:/var/lib/postgresql/data/ # persist data even if container shuts down
        ports:
        - "127.0.0.1:5432:5432"

    redis:
        image: redis
        container_name: redis-db
        ports:
        - "127.0.0.1:6379:6379"

volumes:
  database-data: # named volumes can be managed easier using docker-compose
